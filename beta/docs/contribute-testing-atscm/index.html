<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css rel=stylesheet crossorigin=anonymous integrity="sha256-vK3UTo/8wHbaUn+dTQD0X6dzidqc5l7gczvH+Bnowwk="> <link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/atom-one-light.min.css rel=stylesheet crossorigin=anonymous integrity="sha256-VCcaD9+X/d4QGYRX7l5aMJ8BWgwfA8d3S7i/HC9rvvw="> <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2925089419.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Contribute: Testing atscm – atscm</title><meta content="Contribute: Testing atscm in the atscm manual pages" name=description><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <div class="fullscreen-content svelte-30lnsi"><nav class="is-spaced navbar"><div class=container><div class=navbar-brand> <a href=. class=navbar-item><strong>atscm</strong></a> <div class="burger navbar-burger" role=button><span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span></div></div> <div class=navbar-menu><div class=navbar-start><a href=beta class=navbar-item>Readme </a> <a href=beta/docs class="navbar-item is-active">Manual </a> <a href=beta/api class=navbar-item>Reference </a></div> <div class=navbar-end><div class="navbar-item has-dropdown is-hoverable"><p class=navbar-link><span>Version: <strong>beta</strong></span></p> <div class="is-right navbar-dropdown"><a href=latest class="navbar-item is-flex"><span>latest (1.1.0)</span> </a><a href=beta class="navbar-item is-active is-flex"><span>beta (1.0.0-beta.51)</span> </a></div></div> <div class="navbar-item search-item"> <div class=dropdown><div class=dropdown-trigger><div class=field><div class="control has-icons-left"><input class=input placeholder=Search... type=search> <span class="icon is-left is-small"><i class="fa-search fas"></i></span></div></div></div> </div></div> <div class=navbar-item><div class=buttons><a href=https://github.com/atscm class="button is-light"><span class=icon><i class="fa-github fab"></i></span></a></div></div></div></div></div></nav> <div class=message-section><div class=container><div class="is-warning message"><div class=message-body>Documentation for beta releases may be incomplete.</div></div></div></div> <section class=section><div class=container><div class=columns><div class=column> <div class=content><h1 id=contribute-testing-atscm>Contribute: Testing atscm</h1><p>atscm uses both unit and integration tests. <a href=https://mochajs.org>Mocha</a> is used as a test runner and <a href=https://github.com/istanbuljs/nyc#readme>nyc</a> for test coverage reports.</p> <p><strong>Test scripts:</strong></p> <table> <thead> <tr> <th align=left>Command</th> <th align=left>Description</th> </tr> </thead> <tr> <td align=left><code>npm run test</code></td> <td align=left>Run all tests</td> </tr> <tr> <td align=left><code>npm run test:unit</code></td> <td align=left>Run all unit tests</td> </tr> <tr> <td align=left><code>npm run test:integration</code></td> <td align=left>Run all integration tests</td> </tr> <tr> <td align=left><code>npm run test:watch</code></td> <td align=left>Re-run all tests when files change</td> </tr> <tr> <td align=left><code>npm run test:coverage</code></td> <td align=left>Check test coverage</td> </tr> </table> <h2 id=unit-tests>Unit tests</h2><p>The unit tests are located inside <code>./test/src</code>. Test files are named after the module they test, e.g. unit tests for <code>./src/my/module.js</code> are inside <code>./test/src/my/module.spec.js</code>.</p> <h2 id=integration-tests>Integration tests</h2><p>Integration tests are used to ensure cross-version and -platform compatibility. They are located inside <code>./test/integration</code>.</p> <h3 id=test-setups>Test setups</h3><p>For most integration tests, we use test setups to create the proper project structure to test against. These are XML files that can be imported to the running atserver before the tests are run. <strong>The easiest way to create such files is with atbuilder:</strong></p> <ul> <li>First <em>connect atvise builder</em> to your running atserver</li> <li>Create and <em>configure the node(s)</em> you want to test against</li> <li>Select theses nodes, right-click them and choose <em>"Export hierarchy to XML"</em> from the context menu.</li> <li>Save the export file to <code>./test/fixtures/setup</code>.</li> </ul> <p>After this, you can use the <em>importSetup</em> method exported from <a href=./test/helpers/atscm.js><code>./test/helpers/atscm.js</code></a> to import this setup. See the existing integration tests for examples.</p> </div></div> <div class="column is-3"><aside class=menu><ul class=menu-list><li><a href=beta/docs/node-id-conflicts>Node ID conflicts</a> <li><a href=beta/docs/guide-gulpjs-plugins>Guide: gulp.js plugins</a> <li><a href=beta/docs/guide-debugging-atscm>Guide: Debugging atscm</a> <li><a href=beta/docs/guide-error-handling>Guide: Error handling</a> <li><a href=beta/docs/tutorial-custom-transformer>Tutorial: Custom Transformer</a> <li><a href=beta/docs/contribute-testing-atscm class=is-active>Contribute: Testing atscm</a> <ul class=menu-list><li><a href=beta/docs/contribute-testing-atscm/#unit-tests>Unit tests</a> <li><a href=beta/docs/contribute-testing-atscm/#integration-tests>Integration tests</a> </li> </ul> <li><a href=beta/docs/contributing>Contributing</a> <li><a href=beta/docs/changelog>Changelog</a> </ul></aside></div></div></div></section></div> <footer class=footer><div class="content has-text-centered"><p><strong>atscm</strong> is an open source project by <a href=https://bachmann.info>Bachmann electronics</a> · The source code is licensed <a href=http://opensource.org/licenses/mit-license.php>MIT</a></p> <p><a href=https://github.com/atSCM/atscm/blob/master/.github/CONTRIBUTING.md target=_blank>Get involved </a> · <a href=https://github.com/atSCM/docs target=_blank>Improve this page</a> · <a href=https://www.bachmann.info/en/info/imprint/ target=_blank>Imprint</a></div></footer> </div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},(function(a,b,c,d,e,f,g,h,i){return {topics:[{title:"Node ID conflicts",slug:"node-id-conflicts",sections:[{title:"How atscm handles id conflicts",slug:"how-atscm-handles-id-conflicts"},{title:"How to resolve id conflicts",slug:"how-to-resolve-id-conflicts"}]},{title:"Guide: gulp.js plugins",slug:"guide-gulpjs-plugins",sections:[{title:"Using Transformer class",slug:"using-transformer-class"},{title:"Using PartialTransformer class",slug:"using-partialtransformer-class"},{title:d,slug:e},{title:f,slug:g}]},{title:"Guide: Debugging atscm",slug:"guide-debugging-atscm",sections:[]},{title:"Guide: Error handling",slug:"guide-error-handling",sections:[{title:"Adding source locations",slug:"adding-source-locations"}]},{title:"Tutorial: Custom Transformer",slug:"tutorial-custom-transformer",sections:[{title:"Overview",slug:"overview"},{title:"Step 0: Project setup",slug:"step-0-project-setup"},{title:"Step 1: Import PartialTransformer class",slug:"step-1-import-partialtransformer-class"},{title:"Step 2: Create the BabelTransformer class",slug:"step-2-create-the-babeltransformer-class"},{title:"Step 3: Use BabelTransformer",slug:"step-3-use-babeltransformer"},{title:"Step 4: Implement PartialTransformer#shouldBeTransformed",slug:"step-4-implement-partialtransformershouldbetransformed"},{title:"Step 5: Implement Transformer#transformFromFilesystem",slug:"step-5-implement-transformertransformfromfilesystem"},{title:"Step 6: Test BabelTransformer",slug:"step-6-test-babeltransformer"},{title:"Step 7: Implement Transformer#transformFromDB",slug:"step-7-implement-transformertransformfromdb"},{title:"Result",slug:"result"},{title:d,slug:e},{title:f,slug:g}]},{title:"Contribute: Testing atscm",slug:"contribute-testing-atscm",sections:[{title:"Unit tests",slug:"unit-tests"},{title:"Integration tests",slug:"integration-tests",children:[{title:"Test setups",slug:"test-setups"}]}]},{title:"Contributing",slug:"contributing",sections:[{title:"Found a bug?",slug:"found-a-bug"},{title:"Missing a feature?",slug:"missing-a-feature"},{title:"Submission Guidelines",slug:"submission-guidelines",children:[{title:"Submitting an issue",slug:"submitting-an-issue"},{title:"Submitting a Pull Request (PR)",slug:"submitting-a-pull-request-pr"}]},{title:"Code quality control",slug:"code-quality-control"},{title:"Setting up the development environment",slug:"setting-up-the-development-environment",children:[{title:"Linting files",slug:"linting-files"},{title:"Running tests",slug:"running-tests"},{title:"Creating API documentation",slug:"creating-api-documentation"}]},{title:"Commit Message Guideline",slug:"commit-message-guideline",children:[{title:"Commit message format",slug:"commit-message-format",children:[{title:"Type",slug:"type"},{title:"Scope",slug:"scope"},{title:"Subject",slug:"subject"},{title:"Body",slug:"body"},{title:"Footer",slug:"footer"}]},{title:"Commit message linting",slug:"commit-message-linting"}]}]},{title:"Changelog",slug:"changelog",sections:[{title:"1.0.0-beta.51 (2020-04-21)",slug:"100-beta51-2020-04-21",children:[{title:a,slug:"bug-fixes",children:[{title:b,slug:"features"},{title:c,slug:"performance-improvements"},{title:h,slug:"breaking-changes"}]}]},{title:"0.6.0 (2018-06-17)",slug:"060-2018-06-17",children:[{title:a,slug:"bug-fixes-1",children:[{title:b,slug:"features-1"}]},{title:"0.5.1 (2018-02-16)",slug:"051-2018-02-16",children:[{title:a,slug:"bug-fixes-2"}]}]},{title:"0.5.0 (2018-02-09)",slug:"050-2018-02-09",children:[{title:b,slug:"features-2"},{title:"0.4.3 (2018-02-08)",slug:"043-2018-02-08",children:[{title:a,slug:"bug-fixes-3"}]},{title:"0.4.2 (2017-12-19)",slug:"042-2017-12-19",children:[{title:a,slug:"bug-fixes-4"}]},{title:"0.4.1 (2017-12-18)",slug:"041-2017-12-18",children:[{title:a,slug:"bug-fixes-5"},{title:i,slug:"reverts"}]}]},{title:"0.4.0 (2017-11-21)",slug:"040-2017-11-21",children:[{title:a,slug:"bug-fixes-6",children:[{title:b,slug:"features-3"}]}]},{title:"0.3.0 (2017-05-08)",slug:"030-2017-05-08",children:[{title:a,slug:"bug-fixes-7",children:[{title:b,slug:"features-4"},{title:i,slug:"reverts-1"}]},{title:"0.2.4 (2017-04-05)",slug:"024-2017-04-05",children:[{title:a,slug:"bug-fixes-8"}]},{title:"0.2.3 (2017-04-05)",slug:"023-2017-04-05",children:[{title:a,slug:"bug-fixes-9"}]},{title:"0.2.2 (2017-03-20)",slug:"022-2017-03-20",children:[{title:a,slug:"bug-fixes-10"},{title:b,slug:"features-5"},{title:c,slug:"performance-improvements-1"}]},{title:"0.2.1 (2017-03-13)",slug:"021-2017-03-13",children:[{title:a,slug:"bug-fixes-11"},{title:"Chores",slug:"chores"},{title:b,slug:"features-6"},{title:c,slug:"performance-improvements-2"},{title:h,slug:"breaking-changes-1"}]}]},{title:"0.2.0 (2017-03-08)",slug:"020-2017-03-08",children:[{title:a,slug:"bug-fixes-12",children:[{title:b,slug:"features-7"}]},{title:"0.1.2 (2017-02-23)",slug:"012-2017-02-23"},{title:"0.1.1 (2017-02-22)",slug:"011-2017-02-22",children:[{title:a,slug:"bug-fixes-13"},{title:b,slug:"features-8"},{title:c,slug:"performance-improvements-3"}]}]},{title:"0.1.0 (2017-02-21)",slug:"010-2017-02-21"}]}]}}("Bug Fixes","Features","Performance Improvements","Conclusion","conclusion","Further reading","further-reading","BREAKING CHANGES","Reverts")),{manual:{content:"\u003Ch1 id=\"contribute-testing-atscm\"\u003EContribute: Testing atscm\u003C\u002Fh1\u003E\u003Cp\u003Eatscm uses both unit and integration tests. \u003Ca href=\"https:\u002F\u002Fmochajs.org\"\u003EMocha\u003C\u002Fa\u003E is used as a test runner and \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fistanbuljs\u002Fnyc#readme\"\u003Enyc\u003C\u002Fa\u003E for test coverage reports.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003ETest scripts:\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003ECommand\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Enpm run test\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ERun all tests\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Enpm run test:unit\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ERun all unit tests\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Enpm run test:integration\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ERun all integration tests\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Enpm run test:watch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ERe-run all tests when files change\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Enpm run test:coverage\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ECheck test coverage\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003Ch2 id=\"unit-tests\"\u003EUnit tests\u003C\u002Fh2\u003E\u003Cp\u003EThe unit tests are located inside \u003Ccode\u003E.\u002Ftest\u002Fsrc\u003C\u002Fcode\u003E. Test files are named after the module they test, e.g. unit tests for \u003Ccode\u003E.\u002Fsrc\u002Fmy\u002Fmodule.js\u003C\u002Fcode\u003E are inside \u003Ccode\u003E.\u002Ftest\u002Fsrc\u002Fmy\u002Fmodule.spec.js\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"integration-tests\"\u003EIntegration tests\u003C\u002Fh2\u003E\u003Cp\u003EIntegration tests are used to ensure cross-version and -platform compatibility. They are located inside \u003Ccode\u003E.\u002Ftest\u002Fintegration\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"test-setups\"\u003ETest setups\u003C\u002Fh3\u003E\u003Cp\u003EFor most integration tests, we use test setups to create the proper project structure to test against. These are XML files that can be imported to the running atserver before the tests are run. \u003Cstrong\u003EThe easiest way to create such files is with atbuilder:\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EFirst \u003Cem\u003Econnect atvise builder\u003C\u002Fem\u003E to your running atserver\u003C\u002Fli\u003E\n\u003Cli\u003ECreate and \u003Cem\u003Econfigure the node(s)\u003C\u002Fem\u003E you want to test against\u003C\u002Fli\u003E\n\u003Cli\u003ESelect theses nodes, right-click them and choose \u003Cem\u003E&quot;Export hierarchy to XML&quot;\u003C\u002Fem\u003E from the context menu.\u003C\u002Fli\u003E\n\u003Cli\u003ESave the export file to \u003Ccode\u003E.\u002Ftest\u002Ffixtures\u002Fsetup\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EAfter this, you can use the \u003Cem\u003EimportSetup\u003C\u002Fem\u003E method exported from \u003Ca href=\".\u002Ftest\u002Fhelpers\u002Fatscm.js\"\u003E\u003Ccode\u003E.\u002Ftest\u002Fhelpers\u002Fatscm.js\u003C\u002Fcode\u003E\u003C\u002Fa\u003E to import this setup. See the existing integration tests for examples.\u003C\u002Fp\u003E\n",sections:[{title:"Unit tests",slug:"unit-tests"},{title:"Integration tests",slug:"integration-tests",children:[{title:"Test setups",slug:"test-setups"}]}],title:"Contribute: Testing atscm"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/c.client.093187a1.js"}catch(e){main="/client/legacy/c.client.ca96cc4b.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script defer src=https://use.fontawesome.com/releases/v5.3.1/js/all.js></script> 